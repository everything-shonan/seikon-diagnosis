<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æˆå©šåŠ›è¨ºæ–­çµæœ</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <style>
    body {
      font-family: sans-serif;
      background: #e9f4fb;
      padding: 2em;
      text-align: center;
      color: #003b63;
    }
    .container {
      background: #ffffff;
      max-width: 800px;
      margin: auto;
      padding: 2em;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0, 91, 154, 0.1);
    }
    h1 {
      color: #005b9a;
    }
    .comment {
      text-align: left;
      margin: 1em 0;
      padding: 1em;
      background: #f3faff;
      border-left: 5px solid #007acc;
      border-radius: 8px;
    }
    .summary {
      background: #fff3cd;
      color: #856404;
      padding: 1em;
      border-left: 5px solid #ffeeba;
      border-radius: 8px;
      margin-bottom: 2em;
      text-align: left;
    }
    .next-step {
      margin-top: 2em;
      padding: 1em;
      background: #e0f7fa;
      border-left: 4px solid #00acc1;
      border-radius: 8px;
      text-align: left;
    }
    .next-step h3 {
      margin-top: 0;
      color: #007c91;
    }
    .next-step a {
      display: inline-block;
      margin-top: 0.5em;
      background: #00acc1;
      color: white;
      padding: 0.7em 1.5em;
      border-radius: 6px;
      text-decoration: none;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>è¨ºæ–­çµæœ</h1>
    <canvas id="radarChart" width="400" height="400"></canvas>
    <div id="summary"></div>
    <div id="scoreList"></div>
    <div class="next-step">
      <h3>ğŸ” æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—</h3>
      <p>ã“ã®è¨ºæ–­çµæœã‚’ã‚‚ã¨ã«ã€ãƒ—ãƒ­ã®ã‚«ã‚¦ãƒ³ã‚»ãƒ©ãƒ¼ã«ã‚ˆã‚‹ç„¡æ–™ç›¸è«‡ã‚’æ´»ç”¨ã—ã¾ã›ã‚“ã‹ï¼Ÿ</p>
      <a href="https://everything-shonan.jp/contact/">ç„¡æ–™ã‚«ã‚¦ãƒ³ã‚»ãƒªãƒ³ã‚°ã‚’äºˆç´„ã™ã‚‹</a>
    </div>
  </div>

  <script>
    const scoreData = JSON.parse(localStorage.getItem('seikonScores')) || {};
    const orderedCategories = ['å°è±¡åŠ›', 'å…±æ„ŸåŠ›', 'è¦³å¯ŸåŠ›', 'æ´å¯ŸåŠ›', 'ææ¡ˆåŠ›', 'è¡¨ç¾åŠ›', 'ä¼šè©±åŠ›', 'é€²å±•åŠ›'];
    const chartValues = orderedCategories.map(cat => scoreData[cat] || 0);

    new Chart(document.getElementById('radarChart'), {
      type: 'radar',
      data: {
        labels: orderedCategories,
        datasets: [{
          label: 'ã‚¹ã‚³ã‚¢',
          data: chartValues,
          backgroundColor: 'rgba(0,91,154,0.2)',
          borderColor: '#005b9a',
          pointBackgroundColor: '#005b9a'
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false },
          title: { display: true, text: 'æˆå©šåŠ›ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ' }
        },
        scales: {
          r: { min: 0, max: 30, ticks: { stepSize: 5 } }
        }
      }
    });

    function getRank(score) {
      if (score >= 27) return "S";
      if (score >= 21) return "A";
      if (score >= 15) return "B";
      return "C";
    }

    const totalScore = Object.values(scoreData).reduce((a, b) => a + b, 0);
    let overallRank = getRank(totalScore / 8);
    let advice = "";
    switch (overallRank) {
      case "S":
        advice = "ã‚ãªãŸã¯æˆå©šåŠ›ãŒéå¸¸ã«é«˜ãã€ã©ã®å ´é¢ã§ã‚‚ç›¸æ‰‹ã«å¥½å°è±¡ã‚’ä¸ãˆã‚‰ã‚Œã‚‹ã‚¿ã‚¤ãƒ—ã§ã™ã€‚ã•ã‚‰ãªã‚‹ç£¨ãã‚’ã‹ã‘ã¦æˆå©šã«è¿‘ã¥ãã¾ã—ã‚‡ã†ï¼"; break;
      case "A":
        advice = "å¤šãã®åŠ›ãŒãƒãƒ©ãƒ³ã‚¹è‰¯ãæ•´ã£ã¦ãŠã‚Šã€å©šæ´»ã«ãŠã„ã¦é«˜ã„å®ŸåŠ›ã‚’ç™ºæ®ã§ãã¾ã™ã€‚ã‚ã¨ä¸€æ­©ã®å·¥å¤«ãŒå¤§ããªå‰é€²ã«ã¤ãªãŒã‚Šã¾ã™ã€‚"; break;
      case "B":
        advice = "æˆå©šåŠ›ã®ãƒ™ãƒ¼ã‚¹ã¯ã§ãã¦ã„ã¾ã™ãŒã€ã„ãã¤ã‹ã®é …ç›®ã«æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚ä»Šã®ã†ã¡ã«å¼·åŒ–ã™ã‚‹ã“ã¨ã§ç†æƒ³ã®å‡ºä¼šã„ã«ç¹‹ãŒã‚Šã¾ã™ã€‚"; break;
      case "C":
        advice = "ã“ã‚Œã‹ã‚‰åŠ›ã‚’ã¤ã‘ã¦ã„ãæ®µéšã§ã™ã€‚ç„¦ã‚‰ãšã€è‡ªåˆ†ã«å¿…è¦ãªéƒ¨åˆ†ã‚’è¦‹ç›´ã—ã¦ã€ä¸€æ­©ãšã¤è‡ªä¿¡ã‚’ç©ã¿ä¸Šã’ã¦ã„ãã¾ã—ã‚‡ã†ã€‚"; break;
    }

    document.getElementById("summary").innerHTML = `
      <div class="summary">
        <strong>ç·åˆã‚¹ã‚³ã‚¢ï¼š${totalScore}ç‚¹ï¼240ç‚¹</strong><br>
        <strong>ç·åˆãƒ©ãƒ³ã‚¯ï¼š${overallRank}</strong><br>
        ${advice}
      </div>
    `;

    const comments = {
      "å°è±¡åŠ›": { "S": "ç¬¬ä¸€å°è±¡ã§ã—ã£ã‹ã‚Šå¿ƒã‚’æ´ã‚ã‚‹ã‚ãªãŸã¯ã€è‡ªç„¶ã¨ä¿¡é ¼ã‚’å¾—ã‚‰ã‚Œã‚‹å­˜åœ¨ã§ã™ã€‚",
                  "A": "å°è±¡ã¯è‰¯å¥½ã§å®‰å®šã—ã¦ã„ã¾ã™ã€‚ã•ã‚‰ã«ç£¨ãã‚’ã‹ã‘ã¾ã—ã‚‡ã†ã€‚",
                  "B": "åŸºæœ¬çš„ã«ã¯è‰¯ã„å°è±¡ã‚’æŒãŸã‚Œã¦ã„ã¾ã™ãŒã€æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚",
                  "C": "ç¬¬ä¸€å°è±¡ã«æ”¹å–„ã®ä½™åœ°ãŒã‚ã‚Šã¾ã™ã€‚èº«ã ã—ãªã¿ã‚„è©±ã—æ–¹ã‚’æ„è­˜ã—ã¦ã¿ã¦ãã ã•ã„ã€‚" },
      "å…±æ„ŸåŠ›": { "S": "ç›¸æ‰‹ã®æ°—æŒã¡ã«ã—ã£ã‹ã‚Šå¯„ã‚Šæ·»ãˆã‚‹åŠ›ãŒã‚ã‚Šã¾ã™ã€‚",
                  "A": "å…±æ„Ÿã™ã‚‹å§¿å‹¢ã¯è‰¯å¥½ã§ã™ã€‚è‡ªç„¶ãªãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãŒä¿¡é ¼æ„Ÿã«ã¤ãªãŒã‚Šã¾ã™ã€‚",
                  "B": "å…±æ„ŸãŒã‚„ã‚„æ§ãˆã‚ãªå‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚",
                  "C": "å…±æ„Ÿã®å§¿å‹¢ã‚’æ„è­˜ã™ã‚‹ã“ã¨ãŒä¿¡é ¼é–¢ä¿‚æ§‹ç¯‰ã®ç¬¬ä¸€æ­©ã§ã™ã€‚" }
      // ...ï¼ˆçœç•¥ã€å®Ÿéš›ã¯ã™ã¹ã¦ã®ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ ï¼‰
    };

    const resultContainer = document.getElementById("scoreList");
    orderedCategories.forEach(cat => {
      const score = scoreData[cat] || 0;
      const rank = getRank(score);
      const comment = comments[cat]?.[rank] || "ã‚³ãƒ¡ãƒ³ãƒˆæº–å‚™ä¸­...";
      const div = document.createElement("div");
      div.className = "comment";
      div.innerHTML = `<strong>${cat}ï¼ˆ${score}ç‚¹ï¼‰ - ãƒ©ãƒ³ã‚¯ï¼š${rank}</strong><br>${comment}`;
      resultContainer.appendChild(div);
    });
  </script>
</body>
</html>